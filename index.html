<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AV-Plan - VerktÃ¸y for Ã¥ lage arbeidsvarslingsplaner for norske veier">
    <title>AV-Plan - Arbeidsvarslingsplan</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>

    <!-- Local CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.css">
</head>
<body>
    <!-- Sidebar -->
    <div id="sidebar" class="sidebar">
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <button class="tab active" data-tab="map">Kart</button>
            <button class="tab" data-tab="signs">Skilt</button>
            <button class="tab" data-tab="projects">Prosjekter</button>
        </div>

        <!-- Map Tab Content -->
        <div id="mapTab" class="tab-content active">
            <h2>SÃ¸k og velg vei</h2>

            <!-- Address Search -->
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="SÃ¸k etter adresse eller sted..."
                       aria-label="SÃ¸k etter adresse">
                <button id="searchBtn" class="btn btn-primary">SÃ¸k</button>
            </div>

            <!-- Road Info -->
            <div id="roadInfo" class="info-box">
                <h3>Valgt vei</h3>
                <p id="roadReference">Ingen vei valgt</p>
                <p id="roadDetails" class="small-text"></p>
            </div>

            <!-- Road Selection -->
            <div class="road-selection-controls">
                <h3>Veivelger</h3>
                <button id="selectRoadBtn" class="btn btn-primary" aria-label="Velg vei pÃ¥ kartet">
                    Velg vei
                </button>
            </div>

            <!-- Work Zone Controls -->
            <div class="work-zone-controls">
                <h3>Arbeidssone</h3>
                <div class="button-group">
                    <button id="startBtn" class="btn btn-secondary" aria-label="Sett start for arbeidssone">
                        Sett START
                    </button>
                    <button id="endBtn" class="btn btn-secondary" aria-label="Sett slutt for arbeidssone">
                        Sett SLUTT
                    </button>
                </div>
                <button id="clearZoneBtn" class="btn btn-danger">Fjern arbeidssone</button>
                <p id="zoneStatus" class="zone-status">Ingen arbeidssone definert</p>
            </div>

            <!-- Settings -->
            <div class="settings-section">
                <h3>Innstillinger</h3>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="snapToggle" checked aria-label="Fest til vei">
                        Fest til vei (snapping)
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="markerToggle" aria-label="Vis avstandsmarkÃ¸rer" style="display: none;">
                        <!-- Distance markers disabled - using inline labels instead -->
                    </label>
                </div>
                <div class="setting-item">
                    <label>
                        <input type="checkbox" id="roadLayerToggle" checked aria-label="Vis valgt vei">
                        Vis valgt vei (blÃ¥ linje)
                    </label>
                </div>
            </div>

            <!-- Actions -->
            <div class="actions-section">
                <button id="exportBtn" class="btn btn-primary">ðŸ“¥ Eksporter som bilde</button>
                <button id="saveProjectBtn" class="btn btn-primary">ðŸ’¾ Lagre prosjekt</button>
                <button id="newProjectBtn" class="btn btn-secondary">ðŸ“„ Nytt prosjekt</button>
            </div>
        </div>

        <!-- Signs Tab Content -->
        <div id="signsTab" class="tab-content">
            <h2>Trafikkskilt</h2>
            <p class="help-text">Dra skilt til kartet</p>

            <!-- Speed Signs -->
            <div class="sign-category">
                <h3>Fartsgrenser</h3>
                <div id="speedSigns" class="sign-grid" role="list">
                    <!-- Speed signs will be loaded here -->
                </div>
            </div>

            <!-- Warning Signs -->
            <div class="sign-category">
                <h3>Varslingsskilt</h3>
                <div id="warningSigns" class="sign-grid" role="list">
                    <!-- Warning signs will be loaded here -->
                </div>
            </div>

            <!-- Prohibition Signs -->
            <div class="sign-category">
                <h3>Forbudsskilt</h3>
                <div id="prohibitionSigns" class="sign-grid" role="list">
                    <!-- Prohibition signs will be loaded here -->
                </div>
            </div>

            <div class="sign-count">
                <p>Plasserte skilt: <span id="signCount">0</span></p>
            </div>
        </div>

        <!-- Projects Tab Content -->
        <div id="projectsTab" class="tab-content">
            <h2>Prosjekter</h2>
            <div id="projectList" class="project-list">
                <!-- Projects will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Map Container -->
    <div id="map" class="map-container" role="application" aria-label="Interaktivt kart"></div>

    <!-- Status Bar -->
    <div id="statusBar" class="status-bar">
        <span id="statusText">Klar</span>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="spinner"></div>
        <p>Laster AV-Plan...</p>
    </div>

    <!-- External Libraries -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/leaflet-editable@1.2.0/src/Leaflet.Editable.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://unpkg.com/proj4@2.9.2/dist/proj4.js"></script>

    <!-- Verify libraries loaded -->
    <script>
        window.addEventListener('load', function() {
            if (window.proj4) {
                console.log('âœ“ proj4 library loaded successfully');
            } else {
                console.error('âœ— proj4 library failed to load');
            }

            if (window.L && window.L.Editable) {
                console.log('âœ“ Leaflet.Editable library loaded successfully');
            } else {
                console.error('âœ— Leaflet.Editable library failed to load');
            }
        });
    </script>

    <!-- Application Scripts -->
    <script type="module" src="js/app.js"></script>
</body>
</html>
